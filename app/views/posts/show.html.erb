<% if @comment.errors.any? %>
     <% @comment.errors.full_messages.each do |msg|%>
            <div class="alert alert-danger alert-dismissible fade show mx-3" role="alert">
            <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
                <%= msg%>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
    <% end%>
<% end %>
<div class="container mx-3">
    <h1 class="mt-3"><%= @post.title%></h1>
    <p class="mt-3 font-weight-bold"><%= @post.body%><p>
    <p class="mt-3">Posted <%= time_ago_in_words(@post.created_at)%> ago</p>
    <% if can?(:crud, @post) %>
        <div class="mt-3">
            <%= link_to('Edit', edit_post_path(@post.id), class:"btn btn-outline-primary") %>
            <%= link_to('Delete', post_path(@post.id), method: :delete, data:{confirm:"Are you sure?"}, class: "btn btn-outline-primary") %>
        </div>
    <% end %>
</div>
<div class="mx-3">
    <%= form_with(model:[@post, @comment], class:"mt-3") do |form|%>
        <div class="form-group">
           <h3>Comment</h3>
           <%= form.text_area :body, class: "form-control", placeholder:"What's on your mind?" %>
        </div>
        <%= form.submit "Submit", class:"btn btn-outline-primary mt-3"%>
    <% end %>
</div>
<% @comments.each do |comment| %>
    <div class= "mx-3 mt-3">
        <h5><%= comment.body%></h5>
        <div class="d-flex"> 
            Commented <%= time_ago_in_words(comment.created_at)%> ago â€¢  
            <%= link_to('Delete', post_comment_path(@post.id, comment.id), 
            method: :delete, data:{confirm:"Are you sure?"}, class: "text-primary text-decoration-none mr-1") %> 
        </div>
        
    </div>
<% end %>


